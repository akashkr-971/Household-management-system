
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forget Password</title>
    <style>
        body{
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: aliceblue;
        }
        .full{
            background-color: aqua;
            height: 240px;
            padding: 30px;
            width: 250px;
            border-radius: 30px;
        }
        input{
            margin-top: 5px;
            width:250px;
            border-radius: 10px;
            height: 30px;
            margin-bottom: 5px;
        }
        #forgetbutton{
            margin-top: 20px;
            border-radius: 30px;
            height: 40;
        }
        label{
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        }
        .headin{
            font-size: 26;
            text-align: center;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

    </style>
</head>
<body>
    <div class="full" id="full">
        <div class="first">
            <div class="headin">Forgot your Password</div>
            <br>
            <form method="POST" action="{% url 'forgetpassword' %}" id="forgetPasswordForm">
                <!-- {% csrf_token %} -->
                <div class="resettext">Enter the email id regestered with the website to reset your password</div><br>
                <div><label for="email">Email*</label><br><input type="email" name="email" id="email" required></div>
                <div><input type="submit" value="Forget Password" id="forgetbutton"></div>
                <div style="text-align: center;"><a href="{% url 'home'%}">Return home</a></div>
            </form>
            <script>
                document.getElementById('forgetPasswordForm').addEventListener('submit', function(event) {
                event.preventDefault(); 
                const emailInput = document.getElementById('email')
                const email = emailInput.value;
                fetch("{% url 'forgetpassword' %}", {
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}' 
                    },
                    body: JSON.stringify({ email: email })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                    document.getElementById('second').style.display = 'block';
                    document.getElementById('full').style.height = '370px';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            });
            </script>
        </div>
        <div class="second" id="second" style="display: none;">
            <label id="successotp">OTP send succesfully!!</label>
            <form action="{% url 'verifyotp' %}" method="post" id="passwordform"></form>
                <label for="">Enter the OTP*</label><br>
                <input type="number" name="enteredotp">
                <input type="button" value="Submit">
            </form>
        </div>
    </div>
</body>
</html>